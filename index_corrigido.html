<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Turbo Tuga â€” Game</title>
<style>
  html,body {height:100%;margin:0;background:#071127;font-family:Arial,Helvetica,sans-serif}
  #game-container {width:100%;height:100vh;display:flex;align-items:center;justify-content:center}
  canvas {image-rendering:pixelated;display:block;margin:0 auto}
</style>
</head>
<body>
<div id="game-container"></div>

<!-- ðŸš€ Phaser embutido -->
<script>
/* COLE AQUI O CONTEÃšDO COMPLETO DO phaser.min.js (versÃ£o 3.60.0) */
</script>

<script>
/* ==========================
   GAME CODE
   ========================== */

const GAME_WIDTH = 800, GAME_HEIGHT = 480;

class BootScene extends Phaser.Scene {
  constructor(){ super('BootScene'); }
  preload(){
    // ðŸŽ¨ Sprites embutidos em base64
    this.load.image('background','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAHgCAYAAAA10dzk...'); 
    this.load.spritesheet('tuga','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimH0...',{frameWidth:96,frameHeight:96});
    this.load.image('coin','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHe...'); 
    this.load.image('tile','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgCAYAAADaInAl...');
  }
  create(){ this.scene.start('TitleScene'); }
}

class TitleScene extends Phaser.Scene {
  constructor(){ super('TitleScene'); }
  create(){
    this.add.image(GAME_WIDTH/2,GAME_HEIGHT/2,'background').setDisplaySize(GAME_WIDTH,GAME_HEIGHT);
    this.add.text(GAME_WIDTH/2,90,'TURBO TUGA',{fontSize:'64px',color:'#ffd166'}).setOrigin(0.5);
    this.add.text(GAME_WIDTH/2,150,'Endless runner with coins and levels',{fontSize:'18px',color:'#fff'}).setOrigin(0.5);
    const play = this.add.text(GAME_WIDTH/2,260,'START GAME',{fontSize:'28px',backgroundColor:'#2b8a3e',padding:8,color:'#fff'}).setOrigin(0.5).setInteractive();
    play.on('pointerup',()=>this.scene.start('GameScene',{level:1}));
  }
}

class GameScene extends Phaser.Scene {
  constructor(){ super('GameScene'); }
  init(d){ this.level = d.level||1; }
  create(){
    this.add.image(GAME_WIDTH/2,GAME_HEIGHT/2,'background').setDisplaySize(GAME_WIDTH,GAME_HEIGHT);
    this.platforms = this.physics.add.staticGroup();
    for(let i=0;i<25;i++){ 
      this.platforms.create(i*80,GAME_HEIGHT-16,'tile').setOrigin(0,0).refreshBody(); 
    }
    this.player = this.physics.add.sprite(100,GAME_HEIGHT-120,'tuga').setScale(0.9);
    this.physics.add.collider(this.player,this.platforms);
    if(!this.anims.get('run')){
      this.anims.create({key:'run',frames:this.anims.generateFrameNumbers('tuga',{start:0,end:2}),frameRate:8,repeat:-1});
    }
    this.player.play('run');
    this.coins=this.physics.add.group();
    for(let i=0;i<10;i++){ 
      let c=this.coins.create(200+i*120,GAME_HEIGHT-140,'coin'); 
      c.body.setAllowGravity(false); 
    }
    this.physics.add.overlap(this.player,this.coins,(p,c)=>{c.disableBody(true,true);},null,this);
    this.cursors=this.input.keyboard.createCursorKeys();
  }
  update(){
    let vx=0;
    if(this.cursors.left.isDown) vx=-200;
    else if(this.cursors.right.isDown) vx=200;
    this.player.setVelocityX(vx);
    if(this.cursors.up.isDown && this.player.body.onFloor()){ 
      this.player.setVelocityY(-380); 
    }
  }
}

const cfg = {
  type: Phaser.AUTO,
  width: GAME_WIDTH,
  height: GAME_HEIGHT,
  parent: 'game-container',
  backgroundColor: '#071127',
  physics: { default:'arcade', arcade:{gravity:{y:800},debug:false}},
  scene: [BootScene,TitleScene,GameScene]
};

try {
  new Phaser.Game(cfg);
} catch(e) {
  document.body.innerHTML = '<div style="color:#fff;background:#000;padding:20px;">Erro ao iniciar o jogo. Veja console (F12).</div>';
  console.error(e);
}
</script>
</body>
</html>
